<%= render "shared/header" %>

<%# 商品の概要 %>
<div class="item-show">
  <div class="item-box">
    <h2 class="name">
      <%= "" %>
    </h2>
    <div class="item-img-content">
      <%= image_tag @room.image ,class:"item-box-img" %>
      <%# 商品が売れている場合は、sold outを表示しましょう %>
      <%# //商品が売れている場合は、sold outを表示しましょう %>
    </div>
    <div class="item-price-box">
      <span class="item-price">
        <%= "¥" + "#{@room.price}" %> 
      </span>
      <span class="item-postage">
        <%= @room.address %>
      </span>
    </div>

    <%# ログインしているユーザーと出品しているユーザーが、同一人物の場合と同一人物ではない場合で、処理を分けましょう %>
 <% if user_signed_in? && (current_user.id == @room.user_id)  %>
    <%= link_to "お部屋の編集", edit_room_path(@room.id), method: :get, class: "item-red-btn" %>
    <p class="or-text">or</p>
    <%= link_to "削除", room_path(@room.id), method: :delete, class:"item-destroy" %>
 <% end %>
    <%# 商品が売れていない場合はこちらを表示しましょう %>
    <%# <%= link_to "購入画面に進む", "#" ,class:"item-red-btn"%>
    <%# //商品が売れていない場合はこちらを表示しましょう %>


    <%# //ログインしているユーザーと出品しているユーザーが、同一人物の場合と同一人物ではない場合で、処理を分けましょう %>

    <div class="item-explain-box">
      <span><%= @room.discribe %></span>
    </div>
    <table class="detail-table">
      <tbody>
        <tr>
          <th class="detail-item">出品者</th>
          <td class="detail-value"><%= @room.user.nickname %></td>
        </tr>
        <tr>
          <th class="detail-item">最寄駅</th>
          <td class="detail-value"><%= @room.station %></td>
        </tr>
        <tr>
          <th class="detail-item">利用可能日</th>
          <td class="detail-value"><%= @room.date %></td>
        </tr>
        <tr>
          <th class="detail-item">エアコン</th>
          <td class="detail-value"><%= @room.airConditioner.name %></td>
        </tr>
        <tr>
          <th class="detail-item">キッチン</th>
          <td class="detail-value"><%= @room.kitchen.name %></td>
        </tr>
        <tr>
          <th class="detail-item">トイレ</th>
          <td class="detail-value"><%= @room.toilet.name %></td>
        </tr>
        <tr>
          <th class="detail-item">お風呂</th>
          <td class="detail-value"><%= @room.bathroom.name %></td>
        </tr>
        <tr>
          <th class="detail-item">ペット</th>
          <td class="detail-value"><%= @room.pet.name %></td>
        </tr>
        <% if @room.phone_number.present? %>
        <tr>
          <th class="detail-item">連絡用電話番号</th>
          <td class="detail-value"><%= @room.phone_number %></td>
        </tr>
        <% end %>
         <% if @room.mail.present? %>
        <tr>
          <th class="detail-item">連絡用メールアドレス</th>
          <td class="detail-value"><%= @room.mail %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
    <div class="option">
      <div class="favorite-btn">
        <%= image_tag "star.png" ,class:"favorite-star-icon" ,width:"20",height:"20"%>
        <span>お気に入り 0</span>
      </div>
      <div class="report-btn">
        <%= image_tag "flag.png" ,class:"report-flag-icon" ,width:"20",height:"20"%>
        <span>不適切な商品の通報</span>
      </div>
    </div>
  </div>
  <%# /商品の概要 %>

  <div class="comment-box">
  <% if user_signed_in? %>
    <%= form_with(model: [@room, @comment], local: true) do |form| %>
    <%= form.text_area :text,class: "comment-text",placeholder: "コメントする" ,rows: "2" %>
     
      <p class="comment-warn">
        追加の情報や部屋の見学等はこちらで行ってください。
        <br>
        相手のことを考え丁寧なコメントを心がけましょう。
      </p>
      <%= form.submit "SEND",class: "comment-btn"%>
     <% end %>
    <% else %>
         <strong><p>※※※ コメントの投稿には新規登録/ログインが必要です ※※※</p></strong>
    <% end %>
    <div class ="comments">
      <h4>＜コメント一覧></h4>
      <% @comments.each do |comment|%>
       <p>
        <strong><%= link_to comment.user.nickname, "/users/#{comment.user_id}" %>：</strong>
          <%= comment.text %>
        </p>
      <% end %>
    </div>
  </div>

  <div class="links">
    <a href="#" class="change-item-btn">
      ＜ 前の商品
    </a>
    <a href="#" class="change-item-btn">
      後ろの商品 ＞
    </a>
  </div>
  <%# 詳細ページで表示されている商品のカテゴリー名を表示しましょう %>
  <a href="#" class="another-item"><%= "商品のカテゴリー名" %>をもっと見る</a>
  <%# //詳細ページで表示されている商品のカテゴリー名を表示しましょう %>
</div>

<%= render "shared/footer" %>
